unit CadNotasFrm;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, ConexaoDtm, FireDAC.Stan.Intf,
  FireDAC.Stan.Option, FireDAC.Stan.Param, FireDAC.Stan.Error, FireDAC.DatS,
  FireDAC.Phys.Intf, FireDAC.DApt.Intf, FireDAC.Stan.Async, FireDAC.DApt,
  cxGraphics, cxControls, cxLookAndFeels, cxLookAndFeelPainters, cxContainer,
  cxEdit, dxSkinsCore, dxSkinsDefaultPainters, cxCurrencyEdit, cxDBEdit,
  cxDropDownEdit, cxCalendar, cxTextEdit, cxMaskEdit, cxSpinEdit, Vcl.StdCtrls,
  Data.DB, FireDAC.Comp.DataSet, FireDAC.Comp.Client, Vcl.ExtCtrls, Vcl.DBCtrls;

type
  TfrmCadNotas = class(TForm)
    DBNavigator1: TDBNavigator;
    qryNota: TFDTable;
    qryNotaid: TFDAutoIncField;
    qryNotadt_emiss: TDateTimeField;
    qryNotavalor_merc: TBCDField;
    qryNotavalor_desc: TBCDField;
    qryNotavalor_frete: TBCDField;
    qryNotavalor_total: TBCDField;
    qryNotastatus: TStringField;
    DataSource1: TDataSource;
    Label1: TLabel;
    cxDBSpinEdit1: TcxDBSpinEdit;
    Label2: TLabel;
    cxDBDateEdit1: TcxDBDateEdit;
    Label3: TLabel;
    cxDBCurrencyEdit1: TcxDBCurrencyEdit;
    Label4: TLabel;
    cxDBCurrencyEdit2: TcxDBCurrencyEdit;
    Label5: TLabel;
    cxDBCurrencyEdit3: TcxDBCurrencyEdit;
    Label6: TLabel;
    cxDBCurrencyEdit4: TcxDBCurrencyEdit;
    procedure qryNotaAfterPost(DataSet: TDataSet);
    procedure qryNotaBeforeInsert(DataSet: TDataSet);
  private
  public
  end;

implementation

{$R *.dfm}

procedure TfrmCadNotas.qryNotaAfterPost(DataSet: TDataSet);
begin
  dmConexao.FecharTransacao;
end;

procedure TfrmCadNotas.qryNotaBeforeInsert(DataSet: TDataSet);
begin
  dmConexao.IniciarTransacao;
end;

end.
